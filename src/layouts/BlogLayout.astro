---
import type { CollectionEntry } from "astro:content";

import ShareButtons from "@/components/Blog/ShareButtons.astro";
import TableOfContents from "@/components/Blog/TableOfContents";

type Props = {
  post: CollectionEntry<"blog">;
};

const { post } = Astro.props;
const { Content, headings } = await post.render();
---

<div class="pt-16 px-2 border-x-4">
  <div class="grid grid-cols-12 gap-8 px-4 md:px-8">
    {/* SNS共有ボタン */}
    <aside class="hidden md:col-span-2 md:block">
      <div class="sticky top-20">
        <ShareButtons title={post.data.title} />
      </div>
    </aside>

    {/* 記事コンテンツ */}
    <main class="col-span-12 md:col-span-7">
      <article class="prose dark:prose-invert max-w-none">
        <h1 class="text-4xl font-bold mb-4">{post.data.title}</h1>
        {
          post.data.topImage && (
            <img
              src={post.data.topImage}
              alt=""
              class="w-full h-auto rounded-lg mb-8"
            />
          )
        }
        <div class="md:hidden mb-8">
          <TableOfContents client:load headings={headings} isMobile={true} />
        </div>
        <Content />
      </article>
    </main>

    {/* 目次 */}
    <aside class="hidden md:col-span-3 md:block">
      <div class="sticky top-20">
        <TableOfContents headings={headings} />
      </div>
    </aside>
  </div>
</div>
